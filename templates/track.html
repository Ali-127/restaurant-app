{% extends "base.html" %}
{% load static %}
    {% block title %}Delivery tracking{% endblock title %}
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  
  {% block content %}
  {% include "header.html" %}
  <!--========== SCROLL TOP ==========-->
  <a href="#" class="scrolltop" id="scroll-top">
      <i class='bx bx-chevron-up scrolltop__icon'></i>
  </a>
  <p><h1>Your order is on the way!</h1></p>
  <section class="contact section orderinfo-container" id="contact">
    <div class="track-container">
    <h1>Your Order History</h1>
    
    {% if order_details %}
        {% for detail in order_details %}
            <div class="order-card">
                <div class="order-header">
                    <h3>Order #{{ detail.order.order_id }}</h3>
                    <span class="order-date">{{ detail.order.created_at|date:"M d, Y - g:i A" }}</span>
                </div>
                
                <div class="order-summary">
                    <p><strong>Total Items:</strong> {{ detail.item_count }}</p>
                    <p><strong>Total Amount:</strong> ${{ detail.order.total_amount }}</p>
                </div>
                
                <div class="order-items">
                    <h4>Items Ordered:</h4>
                    {% for item in detail.items %}
                        <div class="order-item">
                          <span>{{ item.quantity }}x {{ item.menu_item.name }}</span>
                          <span class="item-price">${{ item.price }}</span>
                        </div>
                        {% endfor %}
                      </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="no-orders">
                      <p>You haven't placed any orders yet.</p>
                      <a href="{% url 'menu' %}" class="btn">Order Now</a>
                    </div>
                    {% endif %}
        </section>
</div>
    {% include "footer.html" %}
    {% endblock content %}
